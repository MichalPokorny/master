module add python34-modules-gcc
pip install requests SPARQLWrapper protobuf nltk gflags --user

# interactive for Spotlight
qsub -l walltime=4:00:00 -l nodes=1:ppn=16,mem=16gb -I
	# (run spotlight)

# interactive for Fuseki
qsub -l walltime=4:00:00 -l nodes=1:ppn=4,mem=32gb -I

# load Wikidata into Fuseki
qsub -l walltime=48h -l nodes=1:brno:mem=4gb -m abe wikidata_into_fuseki.sh

# -m e: send mail when job terminates

# Download dependencies.
qsub -l walltime=4:00:00 -l nodes=1:ppn=1,mem=1gb -m e metacentrum-prepare.sh

# Split wiki.
qsub -l walltime=0:01:00 -l nodes=1:ppn=1,mem=1gb -m e metacentrum_split_wiki.sh

# NLPize articles.
# qsub -l walltime=1:00:00 -l nodes=1:ppn=4,mem=8gb -m e nlpize_articles.sh
qsub -l walltime=24:00:00 -l nodes=1:ppn=8,mem=96gb -m e nlpize_articles.sh

# Spotlight.
qsub -l walltime=1:00:00 -l nodes=1:ppn=1,mem=1gb -m e metacentrum_spotlight.sh

# get_sentences_entities
qsub -l walltime=1:00:00 -l nodes=1:ppn=1,mem=1gb -m e metacentrum_get_sentences_entities.sh

# get_training_samples
cd ~/bin/metacentrum_get_training_samples.runfiles/__main__/
qsub -l walltime=1:00:00 -l nodes=1:ppn=1,mem=1gb -m e -w `pwd` metacentrum_get_training_samples

TODO: will need to rerun:
	- wiki to plaintext (probably aborted)
