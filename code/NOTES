Requirements
===

All Python code uses Python 3.

```
pip install --user requests SPARQLWrapper protobuf nltk gflags scikit-learn kazoo etaprogress matplotlib
```


PRA
==
# to run PRA: (instructions for downloading dataset etc.: http://rtw.ml.cmu.edu/emnlp2015_sfe/)
~/bin/sbt 'run examples sfe_bfs_pra_anyrel'  # select 1
~/bin/sbt 'run examples sfe_bfs_pra_anyrel'  # select 2

~/bin/sbt 'run prvak'

Using PBS
===

```
# kill PBS job:
qstat -u prvak
qdel 1309042.wagap.cerit-sc.cz
```

PBS dependency lists: http://beige.ucs.indiana.edu/I590/node45.html

qsub -W depend=afterok:$FIRSTJOBID


Useful commands
===
How to build protobuf files:

```
genrule(
    name = "sentence_proto",
    srcs = [
	"sentence.proto",
    ],
    outs = [
	"sentence_pb2.py",
	"Sentence.java",
    ],
    visibility = ["//visibility:public"],
    cmd = "protoc -I=. " +
	"--python_out=$(GENDIR)/ " +
	"--java_out=$(GENDIR)/ " +
	"$(location :sentence.proto)"
)
```

To download charts:
```
scp -r hador.ics.muni.cz:/storage/brno7-cerit/home/prvak/charts
```

Zookeeper files
===

`/user/prvak/thesis/wikidata-service`: contains `hostname:port` of Wikidata
Fuseki (e.g., `hador:3030`)

`/user/prvak/thesis/dbpedia-service`: contains `hostname:port` of DBpedia
Fuseki (e.g., `hador:3030`)

`/user/prvak/thesis/spotlight-annotators`: list of annotator URLs (e.g.,
`http://lex5.ncbr.muni.cz:2222/rest/annotate,http://lex6.ncbr.muni.cz:2223/rest/annotate`)

Various tidbits
===

Fuseki:
	544253967G
	Broken line: 544253967 (wtd:P487 "\a" ;)
		smazat sedem

	then: 544253980G
		removed entire fact

English wikipedia: 5,213,378 articles
	to NLPize 1 article: 3 minutes

	parallelized in 100 jobs: takes 2606 hours
	parallelized in 1000 jobs: takes 260 hours, ~10 days
	parallelized in 10000 jobs: takes ~1 day

tdbloader: more RAM improves speed!
	I want an in-memory TDB database...!
	exceeded limit 4096 MB

module add python34-modules-gcc
module add jdk-8

qsub -l walltime=4:00:00 -l nodes=1:ppn=1,mem=1gb -m abe metacentrum_prepare.sh

# Split wiki.
qsub -l walltime=24:00:00 -l nodes=1:brno:ppn=1,mem=1gb -m abe metacentrum_split_wiki.sh
